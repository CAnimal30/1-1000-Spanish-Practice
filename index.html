<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>1-1000 Spanish Practice</title>
  <style>
    :root{--bg:#f0f4f8;--card:#ffffff;--accent-1:#4CAF50;--accent-2:#2196F3;--warn:#f59e0b}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;display:flex;align-items:center;justify-content:center;min-height:100vh;margin:0;padding:24px;background:var(--bg)}
    .card{position:relative;width:100%;max-width:560px;background:var(--card);border-radius:12px;padding:28px;box-shadow:0 8px 24px rgba(16,24,40,.08);text-align:center;outline:none}
    h1{margin:0 0 12px;font-size:1.25rem;color:#111}
    p.lead{margin:0 0 14px;color:#334155}
    .display{font-size:2.25rem;padding:18px;border-radius:10px;background:#f8fafc;border:1px solid #e6eef6;margin-bottom:10px}
    .spanish{min-height:1.5em;color:#0f172a;font-weight:700;margin-bottom:12px}
    .controls{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
    button{padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
    #reveal{background:var(--accent-1);color:#fff}
    #next{background:var(--accent-2);color:#fff}
    #practice{background:var(--warn);color:#fff}
    .hint{margin-top:12px;color:#475569;font-size:0.9rem}
    .keys{margin-top:8px;color:#334155;font-size:0.85rem}
    .practice-indicator{margin-top:8px;color:#92400e;font-weight:700}
    small{display:block;margin-top:12px;color:#64748b}

    /* Menu button */
    .menu-btn{position:absolute;top:14px;right:14px;width:36px;height:36px;border-radius:8px;background:#e5e7eb;color:#111;font-size:18px;line-height:36px;text-align:center;cursor:pointer;font-weight:700}

    /* Modal */
    .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:1000}
    .modal{background:#fff;border-radius:12px;max-width:520px;width:90%;padding:20px;box-shadow:0 12px 32px rgba(0,0,0,.25);text-align:left}
    .modal h2{margin:0 0 10px;font-size:1.1rem}
    .modal ul{padding-left:18px;margin:8px 0}
    .modal li{margin-bottom:6px}
    .close-btn{position:absolute;top:10px;right:14px;font-size:18px;cursor:pointer;font-weight:700}
  </style>
</head>
<body>
  <div class="card" id="appCard" tabindex="0">
    <div class="menu-btn" id="menuBtn" aria-label="How to count">☰</div>

    <h1>Random Number (1–1000)</h1>
    <p class="lead">Generate a random number and reveal its Spanish spelling. Use the buttons or keyboard keys.</p>

    <div class="display" id="number" aria-live="polite">?</div>
    <div class="spanish" id="spanish" aria-live="polite"></div>

    <div class="controls">
      <button id="reveal" aria-label="Reveal in Spanish">Reveal in Spanish</button>
      <button id="next" aria-label="Next number">Next Number</button>
      <button id="practice" aria-label="Need more practice">Need more practice</button>
    </div>

    <div class="practice-indicator" id="practice-indicator" aria-hidden="true"></div>

    <div class="keys">Keyboard shortcuts: <strong>Space</strong>=Reveal &nbsp; <strong>→</strong>=Next &nbsp; <strong>←</strong>=Need practice</div>
    <div class="hint">If you mark "Need more practice", the very next number will be similar to the current one; the following number after that will be random again.</div>
    <small>Rules implemented: 1–15 irregular, 16–19 dieci-, 21–29 veinti- (with accents where required), tens and hundreds according to standard Spanish.</small>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <div class="close-btn" id="closeModal">✕</div>
      <h2>How Spanish Numbers Work (Quick Guide)</h2>
      <ul>
        <li><strong>1–15</strong>: memorize (uno, dos, tres… quince)</li>
        <li><strong>16–19</strong>: <em>dieci</em> + number → dieciséis, diecisiete…</li>
        <li><strong>20</strong>: veinte</li>
        <li><strong>21–29</strong>: <em>veinti</em> + number → veintiuno, veintidós, veintitrés</li>
        <li><strong>30–90</strong>: memorize tens (treinta, cuarenta, cincuenta…)</li>
        <li><strong>31–99</strong>: tens + <em>y</em> + ones → cuarenta y dos</li>
        <li><strong>100</strong>: cien (only exactly 100)</li>
        <li><strong>101–199</strong>: ciento + rest → ciento uno</li>
        <li><strong>200–900</strong>: memorize hundreds (doscientos, quinientos, setecientos)</li>
        <li><strong>101–999</strong>: hundreds + rest → doscientos treinta y cuatro</li>
        <li><strong>1000</strong>: mil (not <em>un mil</em>)</li>
      </ul>
    </div>
  </div>

  <script>
    const numberEl = document.getElementById('number');
    const spanishEl = document.getElementById('spanish');
    const revealBtn = document.getElementById('reveal');
    const nextBtn = document.getElementById('next');
    const practiceBtn = document.getElementById('practice');
    const practiceIndicator = document.getElementById('practice-indicator');
    const appCard = document.getElementById('appCard');

    const menuBtn = document.getElementById('menuBtn');
    const modalOverlay = document.getElementById('modalOverlay');
    const closeModal = document.getElementById('closeModal');

    function rand(){ return Math.floor(Math.random()*1000)+1 }
    let current = rand();
    numberEl.textContent = current;

    let practiceRequested = false;

    const upto29 = {0:'cero',1:'uno',2:'dos',3:'tres',4:'cuatro',5:'cinco',6:'seis',7:'siete',8:'ocho',9:'nueve',10:'diez',11:'once',12:'doce',13:'trece',14:'catorce',15:'quince',16:'dieciséis',17:'diecisiete',18:'dieciocho',19:'diecinueve',20:'veinte',21:'veintiuno',22:'veintidós',23:'veintitrés',24:'veinticuatro',25:'veinticinco',26:'veintiséis',27:'veintisiete',28:'veintiocho',29:'veintinueve'};

    const tens = {3:'treinta',4:'cuarenta',5:'cincuenta',6:'sesenta',7:'setenta',8:'ochenta',9:'noventa'};
    const hundreds = {1:'ciento',2:'doscientos',3:'trescientos',4:'cuatrocientos',5:'quinientos',6:'seiscientos',7:'setecientos',8:'ochocientos',9:'novecientos'};

    function numberToSpanish(n){
      if (n === 1000) return 'mil';
      if (n <= 29) return upto29[n];
      if (n < 100){
        const d = Math.floor(n/10);
        const u = n % 10;
        const base = tens[d];
        return u === 0 ? base : base + ' y ' + upto29[u];
      }
      if (n === 100) return 'cien';
      const c = Math.floor(n/100);
      const rest = n % 100;
      let prefix = c === 1 ? 'ciento' : hundreds[c];
      return rest === 0 ? prefix : prefix + ' ' + numberToSpanish(rest);
    }

    function generateSimilar(n){
      if (n <= 29){
        const min = Math.max(1, n-5);
        const max = Math.min(29, n+5);
        let candidate = n;
        while(candidate === n) candidate = Math.floor(Math.random()*(max-min+1)) + min;
        return candidate;
      }
      if (n === 1000) return 1000;
      const hundredsDigit = Math.floor(n/100);
      const tensDigit = Math.floor((n%100)/10);
      const base = hundredsDigit*100 + tensDigit*10;
      const min = Math.max(1, base);
      const max = Math.min(999, base + 9);
      let candidate = n;
      while(candidate === n) candidate = Math.floor(Math.random()*(max-min+1)) + min;
      return candidate;
    }

    revealBtn.addEventListener('click', ()=>{ spanishEl.textContent = numberToSpanish(current); });

    nextBtn.addEventListener('click', ()=>{
      if (practiceRequested){ current = generateSimilar(current); practiceRequested = false; practiceIndicator.textContent = 'Practice: similar number shown — next will be random.'; }
      else{ current = rand(); practiceIndicator.textContent = ''; }
      numberEl.textContent = current; spanishEl.textContent = '';
    });

    practiceBtn.addEventListener('click', ()=>{ practiceRequested = true; practiceIndicator.textContent = 'Marked for practice: next number will be similar.'; });

    window.addEventListener('keydown', (e)=>{
      if (e.code === 'Space'){ e.preventDefault(); revealBtn.click(); }
      else if (e.code === 'ArrowRight'){ e.preventDefault(); nextBtn.click(); }
      else if (e.code === 'ArrowLeft'){ e.preventDefault(); practiceBtn.click(); }
    });

    menuBtn.addEventListener('click', ()=>{ modalOverlay.style.display='flex'; });
    closeModal.addEventListener('click', ()=>{ modalOverlay.style.display='none'; });
    modalOverlay.addEventListener('click', (e)=>{ if(e.target===modalOverlay) modalOverlay.style.display='none'; });

    window.addEventListener('load', ()=>{ try{ appCard.focus(); }catch(e){} });
  </script>
</body>
</html>
